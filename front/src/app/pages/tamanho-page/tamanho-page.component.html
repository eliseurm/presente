<crud #crudRef [parent]="vm" listToolbarTitle="Tamanhos" editToolbarTitle="Editar Tamanho"
      [collapsibleFilters]="true"
      [showListCloseButton]="true"
      (closeButtonAction)="onCloseCrud()">

  <!-- Filtros -->
  <div crud-list-filter-fields class="w-full text-left">
    <crud-filter
      [filter]="vm.filter"
      [fields]="filterFields"
      [loading]="false"
      (onSearch)="vm.doFilter().subscribe()"
      (onClear)="onClearFilters()"
    ></crud-filter>
  </div>

  <!-- Grid -->
  <div crud-list-grid class="w-full">
    <e-data-grid
      [dataSource]="vm.dataSource"
      [paginator]="true"
      [rows]="vm.filter.size || 10"
      [rowsPerPageOptions]="[10,20,50,100]"
      [totalRecords]="vm.totalRecords"
      [lazy]="true"
      (onLazyLoad)="onLazyLoad($event)"
      (rowDblClick)="crudRef.onRowDblClick($event)">

      <!-- Colunas -->
      <ei-column dataField="id" caption="ID"></ei-column>
      <ei-column dataField="tipo" caption="Tipo" cellTemplate="tipoTpl"></ei-column>
      <ei-column dataField="tamanho" caption="Tamanho"></ei-column>
      <ei-column dataField="acoes" caption="Ações" cellTemplate="acoesTpl"></ei-column>

      <!-- Templates -->
      <ng-template eTemplate="tipoTpl" let-data="data">{{ tipoProdutoEnumType[data].descricao }}</ng-template>

      <ng-template eTemplate="acoesTpl" let-row>
        <button pButton type="button" icon="pi pi-pencil" class="p-button-text p-button-sm" aria-label="Editar"(click)="crudRef.onRowDblClick(row)"></button>
      </ng-template>

    </e-data-grid>
  </div>

  <!-- Formulário de edição (Tailwind puro) - um campo por linha -->
  <div crud-edit-template class="grid grid-cols-1 gap-4 text-left justify-items-start">
    <div class="flex flex-col gap-2 w-full md:w-1/2">
      <label class="block">Tipo de Produto</label>
      <enum-select class="w-full" [enumObject]="tipoProdutoEnumType" [(ngModel)]="vm.model.tipo" name="tipo"></enum-select>
    </div>
    <div class="flex flex-col gap-2 w-full md:w-1/2">
      <label class="block">Tamanho</label>
      <input class="w-full" pInputText type="text" [(ngModel)]="vm.model.tamanho" name="tamanho" placeholder="Informe o tamanho" />
    </div>
  </div>

</crud>

<p-toast position="top-right" [breakpoints]="{'920px': {width: '100%', right: '0', left: '0'}}"></p-toast>
