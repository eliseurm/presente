/* SCSS */

/* O componente nunca ultrapassa 100% do container */
:host {
    display: block;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
}

/* Garante que o card ocupe 100% e não “vaze” */
:host ::ng-deep .p-card {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

.produto-card {
    width: 100%;
    max-width: 100%;
    overflow: hidden;

    &.disabled {
        opacity: 0.6;
        filter: grayscale(0.2);
        pointer-events: none;
    }

    .card-header {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 0.75rem;

        .titulo {
            margin: 0;
            font-size: 1.125rem;
            line-height: 1.2;
            font-weight: 600;
        }

        .preco {
            font-weight: 700;
            color: var(--primary-color);
            white-space: nowrap;
        }
    }

    /* Layout interno SEM colunas (sempre vertical) */
    .produto-content {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .media {
        margin: 0.25rem 0 0.5rem 0;

        /* Galleria nunca ultrapassa 100% */
        :host ::ng-deep .p-galleria,
        :host ::ng-deep .p-galleria-content,
        :host ::ng-deep .p-galleria-item-wrapper {
            width: 100%;
            max-width: 100%;
            overflow: hidden;
            box-sizing: border-box;
        }

        /* Desktop/tablet: imagem ocupa 100% da largura do card */
        .galleria-img {
            width: 100%;
            aspect-ratio: 4 / 3;
            object-fit: cover;
            border-radius: 8px;
            display: block;
            max-width: 100%;
            background: #f6f7f9;
        }

        /* Mobile: não cortar imagem e limitar altura */
        @media (max-width: 640px) {
            .galleria-img {
                aspect-ratio: auto;
                width: 100%;
                height: auto;
                object-fit: contain;
                max-height: 70vh;
            }
        }
    }

    .descricao {
        margin: 0 0 0.75rem 0;
        opacity: 0.9;
        overflow-wrap: anywhere;
        word-break: break-word;
    }

    /* Ações sempre em coluna para evitar compressão no desktop */
    .acoes {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        gap: 0.75rem;

        .tamanho {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            min-width: 0;

            span {
                white-space: nowrap;
            }
        }

        .selecionar-btn {
            width: 100%;
            max-width: 100%;
            flex-shrink: 0;
        }
    }

    /* SelectButton: permitir quebra e ocupar 100% */
    :host ::ng-deep .p-selectbutton {
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    :host ::ng-deep .p-selectbutton .p-button {
        flex: 1 1 90px;
        min-width: 90px;
        max-width: 100%;
    }

    /* Evita min-width grande no botão */
    :host ::ng-deep .p-button.p-button-lg {
        min-width: 0;
    }

    .nota {
        display: block;
        opacity: 0.85;
    }
}

/* Modo compacto: reduzir o espaço da mídia aproximadamente pela metade */
.produto-card.compact {
    .media {
        /* Em telas grandes, limita o bloco de mídia para reduzir a imagem no resumo */
        max-width: 600px; /* ~metade de cards comuns em layouts amplos */
        width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    .media .galleria-img {
        /* Imagem sempre responsiva no resumo */
        display: block;
        width: 100%;
        height: auto;
        object-fit: contain;
        max-height: 50vh;
        aspect-ratio: auto; /* evita distorção em alguns navegadores */
    }

    /* Em tablets e celulares, ocupar 100% (evita ficar pequena demais) */
    @media (max-width: 1024px) {
        .media {
            max-width: 100%;
        }
    }
    @media (max-width: 640px) {
        .media .galleria-img {
            max-height: 60vh;
        }
    }

    /* Garante que os wrappers internos da Galleria não imponham altura fixa */
    :host ::ng-deep .p-galleria-content,
    :host ::ng-deep .p-galleria-item-wrapper {
        height: auto !important;
    }
}
